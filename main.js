(()=>{"use strict";class o{constructor(){this.element=null,this.isActive=!1,this.innerElements=null}show(o){0==this.isActive&&(this.isActive=!0,this.element.style.display="block"),this.innerElements.map((e=>{e.id===o?e.show():e.hide()}))}hide(){this.isActive=!1,this.element.style.display="none"}setInnerElements(o){o.forEach((o=>{o.init(this.innerComponent)})),this.innerElements=o}createElement(){this.element=document.createElement("div"),this.element.classList.add("Overlay"),this.element.innerHTML='\n          <div class="Overlay_component"></div>\n          <button class="Overlay_exit" data-button="Close_overlay">Close</button>\n        ',this.element.querySelector("button").addEventListener("click",(()=>{this.hide()})),this.innerComponent=this.element.querySelector(".Overlay_component")}init(o){this.createElement(),o.appendChild(this.element)}}class e{constructor(){this.element=null,this.isActive=!1}show(){this.element.style.display="block",this.isActive=!0}hide(){this.element.style.display="none",this.isActive=!1}createElement(){}init(o){this.createElement(),o.appendChild(this.element)}}class r{constructor({text:o,from:e,time:r}){this.text=o,this.from=e,this.time=r,this.element=null}createElement(){this.element=document.createElement("div"),this.element.classList.add("Inbox_message"),this.element.innerHTML=`\n            <div class="Header">${this.from}:</div>\n            <div class="Text">${this.text}</div>\n        `}}class i extends e{constructor(o){super(o),this.messages=[],this.id="Inbox"}update(o){const e=new r({text:o.detail.text,from:o.detail.from,time:0});e.createElement(),this.messages.push(e),this.element.appendChild(e.element)}createElement(){this.element=document.createElement("div"),this.element.classList.add("Inbox"),this.element.innerHTML='\n            <h1 class="Inbox_title">Inbox</h1>\n        ';const{playerState:o}=window;o.inbox.forEach((o=>{const e=new r(o);e.createElement(),this.messages.push(e),this.element.appendChild(e.element)})),document.addEventListener("NewInboxItem",(o=>{this.update(o)}))}}class t extends e{constructor(o){super(o),this.id="Map"}createElement(){this.element=document.createElement("div"),this.element.classList.add("Map"),this.element.innerHTML='\n          <p class="Map_title">Map</p>\n          <button class="Map_button">Map button</button>\n        ',this.element.querySelector("button").addEventListener("click",(()=>{console.log("Map button clicked")}))}}class d{constructor({className:o}){this.options=[],this.className=o}setOptions(o){this.options=o,this.element.innerHTML=this.options.map(((o,e)=>{const r=o.disabled?"disabled":"";return`\n            <button class="${o.classList?.join(" ")??""}" ${r} data-button="${o.data??""}_${e}" data-description="${o.description}">\n              ${o.label}\n            </button>\n        `})).join(""),this.element.querySelectorAll("button").forEach(((o,e)=>{o.addEventListener("click",(()=>{const o=this.options[e+1];console.log(this.options[e]),o.handler()}))}))}updateLabel(o,e){this.element.querySelector(`.${o}`).innerHTML=e}createElement(){this.element=document.createElement("div"),this.element.classList.add(this.className)}end(){this.element.remove()}init(o){this.createElement(),o.appendChild(this.element)}}class s{constructor(o){this.openMap=!1,this.openInbox=!1,this.openChat=!1,this.hasNewMessages=!1,this.progress=o,this.activeElement=null}getOptions(){return[,{label:"my.Cellium",classList:["Pda_title"],data:"PdaButton",disabled:!0,handler:()=>{console.log("My.Cellium")}},{label:window.clockState.getTime(),classList:["Pda_button","Clock"],data:"PdaButton",handler:()=>{}},{label:"Map",classList:["Pda_button","Overlay_button"],data:"PdaButton",handler:()=>{this.overlayElement.show("Map")}},{label:"Inbox",classList:["Pda_button","Overlay_button"],data:"PdaButton",handler:()=>{this.overlayElement.show("Inbox")}},{label:"Save",classList:["Pda_button","Pda_save_button"],data:"PdaButton",handler:()=>{this.progress.save()}}]}createElement(){this.pdaElement=document.createElement("div"),this.pdaElement.classList.add("PdaContainer"),this.keyboardMenu=new d({className:"Pda"}),this.keyboardMenu.init(this.pdaElement),this.keyboardMenu.setOptions(this.getOptions())}init(e){this.createElement(),this.overlayElement=new o,this.overlayElement.init(e),this.overlayElement.setInnerElements([new t,new i]),e.appendChild(this.pdaElement),document.addEventListener("TimePassed",(o=>{this.keyboardMenu.updateLabel("Clock",o.detail.time)}))}}class a extends e{constructor(o){super(o),this.id="Instructions"}createElement(){this.element=document.createElement("div"),this.element.classList.add("Instructions"),this.element.innerHTML='\n          <p class="Instructions_title">HELP ME!</p>\n        '}}class n{constructor(o,e){let r=!0;this.keyDownFunction=function(i){i.code!=o&&"AllKeys"!=o||r&&(r=!1,e())},this.keyUpFunction=function(e){e.code!=o&&"AllKeys"!=o||(r=!0)},document.addEventListener("keydown",this.keyDownFunction),document.addEventListener("keyup",this.keyUpFunction)}unbind(){document.removeEventListener("keydown",this.keyDownFunction),document.removeEventListener("keyup",this.keyUpFunction)}}class h{constructor(){this.actionListeners=[]}bindListeners(){this.actionListeners.push(new n("Enter",(()=>{this.done()}))),this.actionListeners.push(new n("Space",(()=>{this.done()})))}done(){this.overlay.hide(),this.actionListeners.map((o=>o.unbind()))}show(){this.overlay.show("Instructions")}init(e){this.overlay=new o,this.overlay.init(e),this.overlay.setInnerElements([new a]),this.bindListeners()}}class C{constructor(){this.emotions=new Image,this.emotions.src="./images/emotions.png",this.emotions.onload=()=>{this.isEmotionsLoaded=!0},this.emotionMap={blush:[0,0],heart:[0,1],smile:[0,2],angry:[1,0],frown:[1,1],neutral:[1,2],exclamation:[2,0],dots:[2,1],x:[2,2],sideeye:[3,0],sweat:[3,1],yes:[3,2]}}emote(o,e,r,i="blush"){const[t,d]=this.emotionMap[i];this.isEmotionsLoaded&&o.drawImage(this.emotions,11*d,11*t,11,11,e,r,11,11)}}const G={getInteractionRadius(o,e,r){const i={};for(let t=-r;t<=r;t+=16)for(let d=-r;d<=r;d+=16)i[`${o+t},${e+d}`]=!0;return i},withGrid:o=>16*o,asGridCoord:(o,e)=>`${16*o},${16*e}`,roundNearest(o,e){Math.round(o/e)},nextPosition(o,e,r){let i=o,t=e;return"left"===r?i-=16:"right"===r?i+=16:"up"===r?t-=16:"down"===r&&(t+=16),{x:i%16==0?i:16*Math.round(i/16),y:t%16==0?t:16*Math.round(t/16)}},nextPositions(o,e){const r=16,i=o%r==0?o:Math.round(o/r)*r,t=e%r==0?e:Math.round(e/r)*r;return[`${i},${t}`,`${i-r},${t}`,`${i+32},${t}`,`${i+r},${t}`,`${i},${t-r}`,`${i},${t+r}`]},oppositeDirection:o=>"left"===o?"right":"right"===o?"left":"up"===o?"down":"down"===o?"up":"down",emitEvent(o,e){const r=new CustomEvent(o,{detail:e});document.dispatchEvent(r)}};class c{constructor(o){this.image=new Image,this.image.src=o.src,this.image.onload=()=>{this.isLoaded=!0},this.shadow=new Image,this.shadow.src="./images/characters/shadow.png",this.shadow.onload=()=>{this.isShadowLoaded=!0},this.useShadow=!0,this.animations=o.animations||{"idle-down":[[0,0]],"idle-right":[[0,1]],"idle-up":[[0,2]],"idle-left":[[0,3]],"walk-down":[[1,0],[0,0],[3,0],[0,0]],"walk-right":[[1,1],[0,1],[3,1],[0,1]],"walk-up":[[1,2],[0,2],[3,2],[0,2]],"walk-left":[[1,3],[0,3],[3,3],[0,3]]},this.currentAnimation=o.currentAnimation||"idle-down",this.currentAnimationFrame=0,this.animationFrameLimit=o.animationFrameLimit||8,this.animationFrameProgress=this.animationFrameLimit,this.gameObject=o.gameObject,this.height=o.height||32,this.width=o.width||32,this.offsetHeight=o.offsetHeight??0,this.offsetWidth=o.offsetWidth??0}get frame(){return this.animations[this.currentAnimation][this.currentAnimationFrame]}setFrameLimit(o){this.animationFrameLimit=o}setAnimation(o){this.currentAnimation!==o&&(this.currentAnimation=o,this.currentAnimationFrame=0,this.animationFrameProgress=this.animationFrameLimit)}updateAnimationProgress(){this.animationFrameProgress>0?this.animationFrameProgress-=1:(this.animationFrameProgress=this.animationFrameLimit,this.currentAnimationFrame+=1,void 0===this.frame&&(this.currentAnimationFrame=0))}drawEmotion(o,e,r,i){const t=this.gameObject.x+3+e,d=this.gameObject.y-29+r;this.gameObject.emoting&&i.emote(o,t,d,this.gameObject.emoting)}draw(o,e,r){const i=this.gameObject.x-8+e,t=this.gameObject.y-18+r,[d,s]=this.frame;this.isShadowLoaded&&o.drawImage(this.shadow,i,t),this.isLoaded&&o.drawImage(this.image,d*this.width,s*this.height,this.width,this.height,i-this.offsetWidth,t-this.offsetHeight,this.width,this.height),this.updateAnimationProgress()}}class l{constructor(o){this.id=null,this.isMounted=!1,this.x=o.x||0,this.y=o.y||0,this.direction=o.direction||"down",this.sprite=new c({gameObject:this,src:o.src||"./images/characters/people/hero.png",height:o.height,width:o.width,offsetWidth:o.offsetWidth,offsetHeight:o.offsetHeight}),this.behaviorLoop=o.behaviorLoop||[],this.behaviorIndex=0,this.talking=o.talking||[],this.loopId=null}mount(o){this.isMounted=!0;const e="id"+(new Date).getTime();this.loopId=e,setTimeout((()=>{this.doBehaviorEvent(o)}),100)}unmount(o){this.isMounted=!1}async doBehaviorEvent(o){if(!this.isMounted||o.isCutscenePlaying||0==this.behaviorLoop.length||this.isStanding)return;let e=this.behaviorLoop[this.behaviorIndex];e.who=this.id;const r=new OverworldEvent({map:o,event:e});await r.init(),this.behaviorIndex+=1,this.behaviorIndex===this.behaviorLoop.length&&(this.behaviorIndex=0),this.doBehaviorEvent(o)}update(){}}class m extends l{constructor(o){super(o),this.isPlayerControlled=o.isPlayerControlled||!1,this.isStanding=!1,this.isEmoting=!1,this.movingProgressRemaining=0,this.maxSpeed=1,this.directionUpdate={up:["y",-1],down:["y",1],left:["x",-1],right:["x",1]}}update(o){this.movingProgressRemaining>0?this.updatePosition(o.deltaTime):(0==o.map.isCutscenePlaying&&this.isPlayerControlled&&o.arrow&&this.startBehavior(o,{type:"walk",direction:o.arrow}),this.updateSprite(o))}startBehavior(o,e){if(this.direction=e.direction??"down","walk"===e.type){if(o.map.isSpaceTaken(this.x,this.y,this.direction)&&this.isPlayerControlled)return;this.movingProgressRemaining=16,this.updateSprite(o)}"stand"===e.type&&(this.isStanding=!0,setTimeout((()=>{G.emitEvent("PersonStandComplete",{whoId:this.id})}),e.time),this.updateSprite(o),this.isStanding=!1)}updatePosition(o){const[e,r]=this.directionUpdate[this.direction],i=Math.max(Math.round(o/8),1);this[e]+=r*i,this.movingProgressRemaining-=i,this.movingProgressRemaining<=0&&(this.movingProgressRemaining=0,G.emitEvent("PersonWalkingComplete",{whoId:this.id}))}updateSprite(o){this.movingProgressRemaining>0?this.sprite.setAnimation(`walk-${this.direction}`):this.sprite.setAnimation(`idle-${this.direction}`),o.deltaTime>10?this.sprite.setFrameLimit(4):this.sprite.setFrameLimit(8)}}class p extends l{constructor(o){super(o),this.sprite=new c({gameObject:this,src:o.src||"./images/emotions.png",height:o.height,width:o.width,animations:{idle:[[0,0]],moveNear:[[0,0],[0,1],[0,2],[1,0],[1,1],[1,2]],near:[[0,1]],moveFar:[[0,0],[0,1],[0,2],[1,0],[1,1],[1,2]],...o.animations},currentAnimation:"idle",height:o.height,width:o.width,animationFrameLimit:o.animationFrameLimit??8}),this.radius=G.getInteractionRadius(this.x,this.y,o.radius??G.withGrid(2))??{},this.timeoutID=void 0,this.nearHero=!1,this.x=null!=o.offsetX?o.x+o.offsetX:o.x??0,this.y=null!=o.offsetY?o.y+o.offsetY:o.y??0,this.radiusInteraction=o.radiusInteraction??!0,this.userInteraction=o.userInteraction??!0,this.interactionSpaces=o.interactionSpaces??null}cancel(){clearTimeout(this.timeoutID)}propOpen(){this.nearHero=!0,this.sprite.setAnimation("near")}heroApproach(){"number"==typeof this.timeoutID&&this.cancel(),this.sprite.setAnimation("moveNear"),this.timeoutID=setTimeout((()=>{this.sprite.setAnimation("near")}),1e3)}heroLeave(){"number"==typeof this.timeoutID&&this.cancel(),this.sprite.setAnimation("moveFar"),this.timeoutID=setTimeout((()=>{this.sprite.setAnimation("idle")}),1e3)}}class w{constructor(){this.element=null}createElement(){this.element=document.createElement("div"),this.element.classList.add("SceneTransition")}fadeOut(){this.element.classList.add("fade-out"),this.element.addEventListener("animationend",(()=>{this.element.remove()}),{once:!0})}increaseTime(){const{clockState:o}=window,e=o.increaseTime();G.emitEvent("TimePassed",{time:e})}init(o,e){this.increaseTime(),this.createElement(),o.appendChild(this.element),this.element.addEventListener("animationend",(()=>{e()}),{once:!0})}}class g{constructor(o){this.element=o.element,this.text=o.text,this.speed=o.speed||50,this.timeout=null,this.isDone=!1}revealChar(o){const e=o.splice(0,1)[0];e.span.classList.add("revealed"),o.length>0?this.timeout=setTimeout((()=>{this.revealChar(o)}),e.delayAfter):this.isDone=!0}warpToDone(){clearTimeout(this.timeout),this.isDone=!0,this.element.querySelectorAll("span").forEach((o=>{o.classList.add("revealed")}))}init(){let o=[];this.text.split("").forEach((e=>{let r=document.createElement("span");r.textContent=e,this.element.appendChild(r),o.push({span:r,delayAfter:" "===e?0:this.speed})})),this.revealChar(o)}}class y{constructor({text:o,isChat:e,from:r,onComplete:i}){this.text=o,this.from=r,this.isChat=e,this.onComplete=i,this.element=null}createElement(){this.element=document.createElement("div"),this.isChat?this.element.classList.add("ChatMessage"):this.element.classList.add("TextMessage");const o=this.isChat?`New chat from ${this.from}`:`${this.from}`;this.element.innerHTML=[`\n            <p class="TextMessage_from">${o}: </p>\n            <p class="TextMessage_p"></p>\n            <button class="TextMessage_button">${this.isChat?"Ok":"Next"}</button>\n        `],this.revealingText=new g({text:this.text,element:this.element.querySelector(".TextMessage_p")}),this.element.querySelector("button").addEventListener("click",(()=>{this.done()})),this.actionListener=new n("Enter",(()=>{this.done()}))}done(){this.revealingText.isDone||this.isChat?(this.actionListener.unbind(),this.element.remove(),this.onComplete()):this.revealingText.warpToDone()}init(o){this.createElement(),o.appendChild(this.element),this.revealingText.init()}}class u{constructor({map:o,event:e}){this.map=o,this.event=e}stand(o){this.map.gameObjects[this.event.who].startBehavior({map:this.map},{type:"stand",direction:this.event.direction,time:this.event.time});const e=r=>{r.detail.whoId===this.event.who&&(document.removeEventListener("PersonStandComplete",e),o())};document.addEventListener("PersonStandComplete",e)}emote(o){const e=this.map.gameObjects[this.event.who];e.emoting=this.event.emotion,setTimeout((()=>{e.emoting=null}),this.event.time),o()}teleport(o){const e=this.map.gameObjects[this.event.who];e.x=this.event.coordinates.x,e.y=this.event.coordinates.y,o()}walk(o){this.map.gameObjects[this.event.who].startBehavior({map:this.map},{type:"walk",direction:this.event.direction,retry:!0});const e=r=>{r.detail.whoId===this.event.who&&(document.removeEventListener("PersonWalkingComplete",e),o())};document.addEventListener("PersonWalkingComplete",e)}textMessage(o){this.event.faceHero&&(this.map.gameObjects[this.event.faceHero].direction=G.oppositeDirection(this.map.gameObjects.hero.direction)),new y({text:this.event.text,isChat:!1,from:this.event.from||"Boop",onComplete:()=>o()}).init(document.querySelector(".game-container"))}chatMessage(o){new y({text:this.event.text,isChat:!0,from:this.event.from,onComplete:()=>{const{playerState:e}=window;e.addInboxItem({text:this.event.text,from:this.event.from,time:"0",acknowledged:!1}),G.emitEvent("NewInboxItem",{text:this.event.text,from:this.event.from,acknowledged:!1}),o()}}).init(document.querySelector(".game-container"))}multiMessage(o){this.event.faceHero&&(this.map.gameObjects[this.event.faceHero].direction=G.oppositeDirection(this.map.gameObjects.hero.direction)),new MultiMessage({texts:this.event.texts,responses:this.event.responses,onComplete:()=>{G.emitEvent("ConversationComplete",{whoId:this.id})}}).init(document.querySelector(".game-container"));const e=r=>{document.removeEventListener("ConversationComplete",e),o()};document.addEventListener("ConversationComplete",e)}changeMap(o){const e=new w;this.map.unmountObjects(),e.init(document.querySelector(".game-container"),(()=>{this.map.overworld.startMap(window.OverworldMaps[this.event.map],this.event.heroConfig),o(),e.fadeOut()}))}addStoryFlag(o){window.playerState.storyFlags[this.event.flag]=!0,G.emitEvent("StoryFlagAdded",{flag:this.event.flag}),o()}removeStoryFlag(o){window.playerState.storyFlags[this.event.flag]=!1,G.emitEvent("StoryFlagRemoved",{flag:this.event.flag}),o()}init(){return new Promise((o=>{this[this.event.type](o)}))}}class v{constructor(o){this.overworld=null,this.gameObjects={},this.configObjects=o.configObjects,this.walls=o.walls||{},this.withCameraPerson=o.withCameraPerson||!1,this.camera={xRight:G.withGrid(-8),xLeft:G.withGrid(4),yDown:G.withGrid(-2),yUp:G.withGrid(1),...o.camera},this.lowerImage=new Image,this.lowerImage.src=o.lowerSrc,this.upperImage=new Image,this.upperImage.src=o.upperSrc,this.isCutscenePlaying=!1,this.cutsceneSpaces=o.cutsceneSpaces||{},this.initialEvents=o.initialEvents||{}}updateObjects(o){Object.values(this.gameObjects).forEach((e=>{e.update({arrow:o.arrow,map:o.map,deltaTime:o.deltaTime})}))}getXOffset(){return Math.min(this.camera.xLeft,Math.max(G.withGrid(13)-this.gameObjects.hero.x,this.camera.xRight))}getYOffset(){return Math.min(this.camera.yUp,Math.max(G.withGrid(7)-this.gameObjects.hero.y,this.camera.yDown))}draw(o){const e=this.withCameraPerson?this.getXOffset():G.withGrid(6.5),r=this.withCameraPerson?this.getYOffset():G.withGrid(3.5),i=Object.values(this.gameObjects).sort(((o,e)=>o.y-e.y));this.drawLower(o,e,r),i.forEach((i=>{i.sprite.draw(o,e,r)})),this.drawUpper(o,e,r),i.forEach((i=>{i.sprite.drawEmotion(o,e,r,this.overworld.emotionHandler)}))}drawLower(o,e,r){o.drawImage(this.lowerImage,e,r)}drawUpper(o,e,r){o.drawImage(this.upperImage,e,r)}isSpaceTaken(o,e,r){const{x:i,y:t}=G.nextPosition(o,e,r);return this.walls[`${i},${t}`]||!1}playInitialScenes(){this.initialEvents?.events?.length&&(this.initialEvents.required||[]).every((o=>window.playerState.storyFlags[o]))&&this.startCutscene(this.initialEvents.events)}mountNewObject(){Object.keys(this.configObjects).forEach((o=>{const e=this.gameObjects[o],r=this.configObjects[o];if(!e){let e;if(!(r.required||[]).every((o=>window.playerState.storyFlags[o])))return;"Person"===r.type?e=new m(r):"StaticGameObject"===r.type&&(e=new p(r)),this.gameObjects[o]=e,this.gameObjects[o].id=o,this.gameObjects[o].type=r.type,e.mount(this)}}))}mountObjects(){Object.keys(this.configObjects).forEach((o=>{let e,r=this.configObjects[o];r.id=o,(r.required||[]).every((o=>window.playerState.storyFlags[o]))&&("Person"===r.type?e=new m(r):"StaticGameObject"===r.type&&(e=new p(r)),this.gameObjects[o]=e,this.gameObjects[o].id=o,this.gameObjects[o].type=r.type,e.mount(this))})),document.addEventListener("StoryFlagAdded",(o=>{this.mountNewObject()}))}unmountObjects(){Object.keys(this.gameObjects).forEach((o=>{let e=this.gameObjects[o];e.id=o,e.unmount(this)})),document.addEventListener("StoryFlagAdded",(o=>{this.mountNewObject()}))}async startCutscene(o){this.isCutscenePlaying=!0;for(let e=0;e<o.length;e++){const r=new u({event:o[e],map:this});await r.init()}this.isCutscenePlaying=!1,Object.values(this.gameObjects).forEach((o=>o.doBehaviorEvent(this)))}checkForActionCutscene(){const o=this.gameObjects.hero,e=G.nextPositions(o.x,o.y),r=Object.values(this.gameObjects).filter((o=>"hero"!==o.id)).find((o=>e.indexOf(`${o.x},${o.y}`)>-1));if(!this.isCutscenePlaying&&r&&r.talking.length){const o=r.talking.find((o=>(o.required||[]).every((o=>window.playerState.storyFlags[o]))));this.startCutscene(o.events)}}checkForStaticObjectAnimation(){const o=this.gameObjects.hero,e=`${o.x%16==0?o.x:16*Math.round(o.x/16)},${o.y%16==0?o.y:16*Math.round(o.y/16)}`;Object.values(this.gameObjects).filter((o=>"StaticGameObject"===o.type&&o.radiusInteraction)).forEach((o=>{let r=o.interactionSpaces?.[e];r&&this.startCutscene(r.events),o.radius[e]?(o.nearHero||o.heroApproach(this,e),o.nearHero=!0):(o.nearHero&&o.heroLeave(),o.nearHero=!1)}))}checkForTimedCutscene(){const{clockState:o,timedEvents:e}=window,r=e[o.time];r&&this.startCutscene(r.events)}checkForFootstepCutscene(){const o=this.gameObjects.hero,e=o.x%16==0?o.x:16*Math.round(o.x/16),r=o.y%16==0?o.y:16*Math.round(o.y/16),i=this.cutsceneSpaces[`${e},${r}`];!this.isCutscenePlaying&&i&&this.startCutscene(i[0].events)}}window.OverworldMaps={Bedroom:{id:"Bedroom",lowerSrc:"./images/maps/BedroomLower.png",upperSrc:"./images/maps/BedroomUpper.png",configObjects:{hero:{type:"Person",isPlayerControlled:!0,x:G.withGrid(6),y:G.withGrid(2)}},gameObjects:{},walls:{[G.asGridCoord(0,1)]:!0,[G.asGridCoord(1,1)]:!0,[G.asGridCoord(3,1)]:!0,[G.asGridCoord(2,1)]:!0,[G.asGridCoord(5,1)]:!0,[G.asGridCoord(4,1)]:!0,[G.asGridCoord(6,1)]:!0,[G.asGridCoord(7,1)]:!0,[G.asGridCoord(-1,0)]:!0,[G.asGridCoord(-1,1)]:!0,[G.asGridCoord(-1,2)]:!0,[G.asGridCoord(-1,3)]:!0,[G.asGridCoord(-1,4)]:!0,[G.asGridCoord(-1,5)]:!0,[G.asGridCoord(-1,6)]:!0,[G.asGridCoord(-1,7)]:!0,[G.asGridCoord(-1,8)]:!0,[G.asGridCoord(8,0)]:!0,[G.asGridCoord(8,1)]:!0,[G.asGridCoord(8,2)]:!0,[G.asGridCoord(8,4)]:!0,[G.asGridCoord(8,5)]:!0,[G.asGridCoord(8,6)]:!0,[G.asGridCoord(8,7)]:!0,[G.asGridCoord(8,8)]:!0,[G.asGridCoord(6,3)]:!0,[G.asGridCoord(7,3)]:!0,[G.asGridCoord(6,5)]:!0,[G.asGridCoord(6,6)]:!0,[G.asGridCoord(6,7)]:!0,[G.asGridCoord(7,5)]:!0,[G.asGridCoord(7,6)]:!0,[G.asGridCoord(7,7)]:!0,[G.asGridCoord(0,8)]:!0,[G.asGridCoord(1,8)]:!0,[G.asGridCoord(2,8)]:!0,[G.asGridCoord(5,8)]:!0,[G.asGridCoord(4,8)]:!0,[G.asGridCoord(6,8)]:!0,[G.asGridCoord(7,8)]:!0,[G.asGridCoord(0,4)]:!0,[G.asGridCoord(0,5)]:!0,[G.asGridCoord(0,6)]:!0,[G.asGridCoord(1,4)]:!0,[G.asGridCoord(1,5)]:!0,[G.asGridCoord(1,6)]:!0},cutsceneSpaces:{[G.asGridCoord(3,8)]:[{events:[{who:"hero",type:"walk",direction:"down"},{type:"changeMap",map:"LivingRoom"}]}]}},LivingRoom:{id:"LivingRoom",withCameraPerson:!0,camera:{xRight:G.withGrid(5),xLeft:G.withGrid(5),yUp:G.withGrid(3),yDown:G.withGrid(3)},lowerSrc:"./images/maps/LivingRoomLower.png",upperSrc:"./images/maps/LivingRoomUpper.png",configObjects:{hero:{type:"Person",isPlayerControlled:!0,x:G.withGrid(1),y:G.withGrid(3)},Chantrella:{type:"Person",x:G.withGrid(9),y:G.withGrid(6),required:["INTRO"],src:"./images/characters/people/Chantrella.png",talking:[{required:["TALKED_TO_CHANTRELLA"],events:[{type:"textMessage",from:"Chantrella",text:"How did I get in here?"},{type:"emote",emotion:"dots",who:"Chantrella",time:2e3},{type:"textMessage",from:"Chantrella",text:"......"},{type:"emote",emotion:"dots",who:"hero",time:2e3}]},{events:[{type:"textMessage",from:"Chantrella",text:"Hey Hamanita"},{type:"textMessage",from:"Chantrella",text:"Have you seen Morel?"},{type:"chatMessage",text:"Don't tell Chantrella I'm here...",from:"Morel",acknowledged:!1},{type:"emote",emotion:"x",who:"hero",time:1e3},{type:"textMessage",from:"Chantrella",text:"Oh..... ok... well let me know if you hear from her"},{type:"addStoryFlag",flag:"TALKED_TO_CHANTRELLA"}]}]}},gameObjects:{},walls:{[G.asGridCoord(0,1)]:!0,[G.asGridCoord(1,1)]:!0,[G.asGridCoord(2,1)]:!0,[G.asGridCoord(3,2)]:!0,[G.asGridCoord(4,2)]:!0,[G.asGridCoord(5,2)]:!0,[G.asGridCoord(6,2)]:!0,[G.asGridCoord(7,2)]:!0,[G.asGridCoord(8,2)]:!0,[G.asGridCoord(9,2)]:!0,[G.asGridCoord(10,2)]:!0,[G.asGridCoord(11,2)]:!0,[G.asGridCoord(-1,0)]:!0,[G.asGridCoord(-1,1)]:!0,[G.asGridCoord(-1,2)]:!0,[G.asGridCoord(-1,3)]:!0,[G.asGridCoord(-1,4)]:!0,[G.asGridCoord(-1,5)]:!0,[G.asGridCoord(-1,6)]:!0,[G.asGridCoord(-1,7)]:!0,[G.asGridCoord(-1,8)]:!0,[G.asGridCoord(12,0)]:!0,[G.asGridCoord(12,1)]:!0,[G.asGridCoord(12,2)]:!0,[G.asGridCoord(12,3)]:!0,[G.asGridCoord(12,4)]:!0,[G.asGridCoord(12,5)]:!0,[G.asGridCoord(12,6)]:!0,[G.asGridCoord(12,7)]:!0,[G.asGridCoord(12,8)]:!0,[G.asGridCoord(0,8)]:!0,[G.asGridCoord(1,8)]:!0,[G.asGridCoord(2,8)]:!0,[G.asGridCoord(4,8)]:!0,[G.asGridCoord(5,8)]:!0,[G.asGridCoord(6,8)]:!0,[G.asGridCoord(7,8)]:!0,[G.asGridCoord(8,8)]:!0,[G.asGridCoord(9,8)]:!0,[G.asGridCoord(10,8)]:!0,[G.asGridCoord(11,8)]:!0,[G.asGridCoord(5,4)]:!0,[G.asGridCoord(6,4)]:!0,[G.asGridCoord(7,4)]:!0,[G.asGridCoord(5,5)]:!0,[G.asGridCoord(6,5)]:!0,[G.asGridCoord(7,5)]:!0,[G.asGridCoord(0,5)]:!0,[G.asGridCoord(1,5)]:!0},cutsceneSpaces:{[G.asGridCoord(3,8)]:[{events:[{who:"hero",type:"walk",direction:"down"},{type:"changeMap",map:"Outside",heroConfig:{x:G.withGrid(3),y:G.withGrid(7),direction:"up",nearDoor:"HomeDoor"}}]}],[G.asGridCoord(1,2)]:[{events:[{type:"changeMap",map:"Bedroom",heroConfig:{x:G.withGrid(3),y:G.withGrid(6),direction:"up"}}]}],[G.asGridCoord(2,2)]:[{events:[{type:"changeMap",map:"Bedroom",heroConfig:{x:G.withGrid(3),y:G.withGrid(6),direction:"up"}}]}]}},Outside:{id:"Outside",lowerSrc:"./images/maps/OutsideLower.png",upperSrc:"./images/maps/OutsideUpper.png",withCameraPerson:!0,configObjects:{hero:{type:"Person",isPlayerControlled:!0,x:G.withGrid(3),y:G.withGrid(7)},HomeDoor:{type:"StaticGameObject",height:28,width:22,src:"./images/objects/HomeDoor.png",x:G.withGrid(3),y:G.withGrid(6),offsetX:6,offsetY:3,animations:{idle:[[0,0]],moveNear:[[0,0],[1,0],[2,0],[3,0],[4,0]],near:[[4,0]],moveFar:[[4,0],[3,0],[2,0],[1,0],[0,0]]},animationFrameLimit:25,radius:G.withGrid(3),radiusInteraction:!0,userInteraction:!1}},walls:{[G.asGridCoord(-1,5)]:!0,[G.asGridCoord(-1,6)]:!0,[G.asGridCoord(-1,7)]:!0,[G.asGridCoord(-1,8)]:!0,[G.asGridCoord(-1,9)]:!0,[G.asGridCoord(-1,10)]:!0,[G.asGridCoord(-1,11)]:!0,[G.asGridCoord(32,5)]:!0,[G.asGridCoord(32,6)]:!0,[G.asGridCoord(32,7)]:!0,[G.asGridCoord(32,8)]:!0,[G.asGridCoord(32,9)]:!0,[G.asGridCoord(32,10)]:!0,[G.asGridCoord(32,11)]:!0,[G.asGridCoord(32,12)]:!0,[G.asGridCoord(32,13)]:!0,[G.asGridCoord(32,14)]:!0,[G.asGridCoord(32,15)]:!0,[G.asGridCoord(19,16)]:!0,[G.asGridCoord(23,16)]:!0,[G.asGridCoord(24,16)]:!0,[G.asGridCoord(25,16)]:!0,[G.asGridCoord(26,16)]:!0,[G.asGridCoord(27,16)]:!0,[G.asGridCoord(28,16)]:!0,[G.asGridCoord(29,16)]:!0,[G.asGridCoord(30,16)]:!0,[G.asGridCoord(31,16)]:!0,[G.asGridCoord(0,4)]:!0,[G.asGridCoord(1,4)]:!0,[G.asGridCoord(2,4)]:!0,[G.asGridCoord(3,4)]:!0,[G.asGridCoord(4,4)]:!0,[G.asGridCoord(5,4)]:!0,[G.asGridCoord(6,4)]:!0,[G.asGridCoord(7,4)]:!0,[G.asGridCoord(8,4)]:!0,[G.asGridCoord(9,4)]:!0,[G.asGridCoord(10,4)]:!0,[G.asGridCoord(11,4)]:!0,[G.asGridCoord(12,4)]:!0,[G.asGridCoord(13,4)]:!0,[G.asGridCoord(14,4)]:!0,[G.asGridCoord(15,4)]:!0,[G.asGridCoord(16,4)]:!0,[G.asGridCoord(17,4)]:!0,[G.asGridCoord(18,4)]:!0,[G.asGridCoord(19,4)]:!0,[G.asGridCoord(20,4)]:!0,[G.asGridCoord(21,4)]:!0,[G.asGridCoord(22,4)]:!0,[G.asGridCoord(23,4)]:!0,[G.asGridCoord(24,4)]:!0,[G.asGridCoord(25,4)]:!0,[G.asGridCoord(26,4)]:!0,[G.asGridCoord(27,4)]:!0,[G.asGridCoord(28,4)]:!0,[G.asGridCoord(29,4)]:!0,[G.asGridCoord(30,4)]:!0,[G.asGridCoord(31,4)]:!0,[G.asGridCoord(0,12)]:!0,[G.asGridCoord(1,12)]:!0,[G.asGridCoord(2,12)]:!0,[G.asGridCoord(3,12)]:!0,[G.asGridCoord(4,12)]:!0,[G.asGridCoord(5,12)]:!0,[G.asGridCoord(6,12)]:!0,[G.asGridCoord(7,12)]:!0,[G.asGridCoord(8,12)]:!0,[G.asGridCoord(9,12)]:!0,[G.asGridCoord(10,12)]:!0,[G.asGridCoord(11,12)]:!0,[G.asGridCoord(12,12)]:!0,[G.asGridCoord(13,12)]:!0,[G.asGridCoord(14,12)]:!0,[G.asGridCoord(15,12)]:!0,[G.asGridCoord(16,12)]:!0,[G.asGridCoord(17,12)]:!0,[G.asGridCoord(18,12)]:!0,[G.asGridCoord(18,13)]:!0,[G.asGridCoord(18,14)]:!0,[G.asGridCoord(18,15)]:!0,[G.asGridCoord(18,12)]:!0,[G.asGridCoord(21,6)]:!0,[G.asGridCoord(22,6)]:!0,[G.asGridCoord(23,6)]:!0,[G.asGridCoord(21,7)]:!0,[G.asGridCoord(22,7)]:!0,[G.asGridCoord(23,7)]:!0,[G.asGridCoord(23,13)]:!0,[G.asGridCoord(28,14)]:!0,[G.asGridCoord(1,5)]:!0,[G.asGridCoord(1,6)]:!0,[G.asGridCoord(2,5)]:!0,[G.asGridCoord(2,6)]:!0,[G.asGridCoord(3,5)]:!0,[G.asGridCoord(3,6)]:!0,[G.asGridCoord(4,5)]:!0,[G.asGridCoord(4,6)]:!0,[G.asGridCoord(5,5)]:!0,[G.asGridCoord(5,6)]:!0,[G.asGridCoord(10,6)]:!0,[G.asGridCoord(11,6)]:!0,[G.asGridCoord(12,6)]:!0,[G.asGridCoord(13,6)]:!0,[G.asGridCoord(14,6)]:!0,[G.asGridCoord(10,7)]:!0,[G.asGridCoord(11,7)]:!0,[G.asGridCoord(12,7)]:!0,[G.asGridCoord(13,7)]:!0,[G.asGridCoord(14,7)]:!0},cutsceneSpaces:{[G.asGridCoord(20,15)]:[{events:[{who:"hero",type:"walk",direction:"down"},{type:"changeMap",map:"Outside01"}]}],[G.asGridCoord(21,15)]:[{events:[{who:"hero",type:"walk",direction:"down"},{type:"changeMap",map:"Outside01"}]}],[G.asGridCoord(22,15)]:[{events:[{who:"hero",type:"walk",direction:"down"},{type:"changeMap",map:"Outside01"}]}],[G.asGridCoord(3,7)]:[{events:[{type:"changeMap",map:"LivingRoom",heroConfig:{x:G.withGrid(3),y:G.withGrid(6),direction:"up"}}]}]}},Outside01:{id:"Outside01",lowerSrc:"./images/maps/Outside01Lower.png",upperSrc:"./images/maps/Outside01Upper.png",withCameraPerson:!0,configObjects:{hero:{type:"Person",isPlayerControlled:!0,x:G.withGrid(20),y:G.withGrid(1)}},walls:{[G.asGridCoord(-1,10)]:!0,[G.asGridCoord(-1,11)]:!0,[G.asGridCoord(-1,12)]:!0,[G.asGridCoord(-1,13)]:!0,[G.asGridCoord(-1,14)]:!0,[G.asGridCoord(-1,15)]:!0,[G.asGridCoord(-1,16)]:!0,[G.asGridCoord(-1,17)]:!0,[G.asGridCoord(32,0)]:!0,[G.asGridCoord(32,1)]:!0,[G.asGridCoord(32,2)]:!0,[G.asGridCoord(32,3)]:!0,[G.asGridCoord(32,4)]:!0,[G.asGridCoord(32,5)]:!0,[G.asGridCoord(32,6)]:!0,[G.asGridCoord(32,7)]:!0,[G.asGridCoord(32,8)]:!0,[G.asGridCoord(32,9)]:!0,[G.asGridCoord(32,10)]:!0,[G.asGridCoord(32,11)]:!0,[G.asGridCoord(32,15)]:!0,[G.asGridCoord(19,0)]:!0,[G.asGridCoord(23,0)]:!0,[G.asGridCoord(24,0)]:!0,[G.asGridCoord(25,0)]:!0,[G.asGridCoord(26,0)]:!0,[G.asGridCoord(27,0)]:!0,[G.asGridCoord(28,0)]:!0,[G.asGridCoord(29,0)]:!0,[G.asGridCoord(30,0)]:!0,[G.asGridCoord(31,0)]:!0,[G.asGridCoord(0,16)]:!0,[G.asGridCoord(1,16)]:!0,[G.asGridCoord(2,16)]:!0,[G.asGridCoord(3,16)]:!0,[G.asGridCoord(4,16)]:!0,[G.asGridCoord(5,16)]:!0,[G.asGridCoord(6,16)]:!0,[G.asGridCoord(7,16)]:!0,[G.asGridCoord(8,16)]:!0,[G.asGridCoord(9,16)]:!0,[G.asGridCoord(10,16)]:!0,[G.asGridCoord(11,16)]:!0,[G.asGridCoord(12,16)]:!0,[G.asGridCoord(13,16)]:!0,[G.asGridCoord(14,16)]:!0,[G.asGridCoord(15,16)]:!0,[G.asGridCoord(16,16)]:!0,[G.asGridCoord(17,16)]:!0,[G.asGridCoord(18,16)]:!0,[G.asGridCoord(19,16)]:!0,[G.asGridCoord(23,16)]:!0,[G.asGridCoord(24,16)]:!0,[G.asGridCoord(25,16)]:!0,[G.asGridCoord(26,16)]:!0,[G.asGridCoord(27,16)]:!0,[G.asGridCoord(28,16)]:!0,[G.asGridCoord(29,16)]:!0,[G.asGridCoord(30,16)]:!0,[G.asGridCoord(31,16)]:!0,[G.asGridCoord(0,9)]:!0,[G.asGridCoord(1,9)]:!0,[G.asGridCoord(2,9)]:!0,[G.asGridCoord(3,9)]:!0,[G.asGridCoord(4,9)]:!0,[G.asGridCoord(5,9)]:!0,[G.asGridCoord(6,9)]:!0,[G.asGridCoord(7,9)]:!0,[G.asGridCoord(8,9)]:!0,[G.asGridCoord(9,9)]:!0,[G.asGridCoord(10,9)]:!0,[G.asGridCoord(11,9)]:!0,[G.asGridCoord(12,9)]:!0,[G.asGridCoord(13,9)]:!0,[G.asGridCoord(14,9)]:!0,[G.asGridCoord(15,9)]:!0,[G.asGridCoord(16,9)]:!0,[G.asGridCoord(17,9)]:!0,[G.asGridCoord(18,9)]:!0,[G.asGridCoord(18,0)]:!0,[G.asGridCoord(18,1)]:!0,[G.asGridCoord(18,2)]:!0,[G.asGridCoord(18,3)]:!0,[G.asGridCoord(18,4)]:!0,[G.asGridCoord(18,5)]:!0,[G.asGridCoord(18,6)]:!0,[G.asGridCoord(18,7)]:!0,[G.asGridCoord(18,8)]:!0,[G.asGridCoord(18,9)]:!0},cutsceneSpaces:{[G.asGridCoord(20,1)]:[{events:[{type:"changeMap",map:"Outside",heroConfig:{x:G.withGrid(20),y:G.withGrid(14),direction:"up"}}]}],[G.asGridCoord(21,1)]:[{events:[{type:"changeMap",map:"Outside",heroConfig:{x:G.withGrid(20),y:G.withGrid(14),direction:"up"}}]}],[G.asGridCoord(22,1)]:[{events:[{type:"changeMap",map:"Outside",heroConfig:{x:G.withGrid(20),y:G.withGrid(14),direction:"up"}}]}],[G.asGridCoord(31,12)]:[{events:[{who:"hero",type:"walk",direction:"right"},{type:"changeMap",map:"TownSquare",heroConfig:{x:G.withGrid(2),y:G.withGrid(8),direction:"right"}}]}],[G.asGridCoord(31,13)]:[{events:[{who:"hero",type:"walk",direction:"right"},{type:"changeMap",map:"TownSquare",heroConfig:{x:G.withGrid(2),y:G.withGrid(8),direction:"right"}}]}],[G.asGridCoord(31,14)]:[{events:[{who:"hero",type:"walk",direction:"right"},{type:"changeMap",map:"TownSquare",heroConfig:{x:G.withGrid(2),y:G.withGrid(8),direction:"right"}}]}],[G.asGridCoord(20,16)]:[{events:[{who:"hero",type:"walk",direction:"down"},{type:"changeMap",map:"Toadstool"}]}],[G.asGridCoord(21,16)]:[{events:[{who:"hero",type:"walk",direction:"down"},{type:"changeMap",map:"Toadstool"}]}],[G.asGridCoord(22,16)]:[{events:[{who:"hero",type:"walk",direction:"down"},{type:"changeMap",map:"Toadstool"}]}]}},Toadstool:{id:"Toadstool",lowerSrc:"./images/maps/ToadstoolLower.png",upperSrc:"./images/maps/ToadstoolUpper.png",withCameraPerson:!0,camera:{yDown:G.withGrid(-4)},configObjects:{hero:{type:"Person",isPlayerControlled:!0,x:G.withGrid(14),y:G.withGrid(4)},ToadstoolDoor:{type:"StaticGameObject",height:46,width:26,src:"./images/objects/ToadstoolDoor.png",x:G.withGrid(24),y:G.withGrid(7),offsetX:4,offsetY:4,animations:{idle:[[0,0]],moveNear:[[0,0],[1,0],[2,0],[3,0],[4,0]],near:[[4,0]],moveFar:[[4,0],[3,0],[2,0],[1,0],[0,0]]},animationFrameLimit:25,radius:G.withGrid(4),radiusInteraction:!0,userInteraction:!1},CandyCapDoor:{type:"StaticGameObject",height:50,width:36,src:"./images/objects/CandyCapDoor.png",x:G.withGrid(5),y:G.withGrid(6),offsetX:5,offsetY:11,animations:{idle:[[0,0]],moveNear:[[0,0],[1,0],[2,0],[3,0],[4,0]],near:[[4,0]],moveFar:[[4,0],[3,0],[2,0],[1,0],[0,0]]},animationFrameLimit:25,radius:G.withGrid(5),radiusInteraction:!0,userInteraction:!1,interactionSpaces:{[G.asGridCoord(5,9)]:{events:[{type:"changeMap",map:"CandyCap",heroConfig:{x:G.withGrid(5),y:G.withGrid(7),direction:"down"}}]},[G.asGridCoord(6,9)]:{events:[{type:"changeMap",map:"CandyCap",heroConfig:{x:G.withGrid(5),y:G.withGrid(7),direction:"down"}}]}},required:["KANDI_MSG"]}},walls:{[G.asGridCoord(0,4)]:!0,[G.asGridCoord(1,4)]:!0,[G.asGridCoord(2,4)]:!0,[G.asGridCoord(3,4)]:!0,[G.asGridCoord(4,4)]:!0,[G.asGridCoord(5,4)]:!0,[G.asGridCoord(6,4)]:!0,[G.asGridCoord(7,4)]:!0,[G.asGridCoord(8,4)]:!0,[G.asGridCoord(9,4)]:!0,[G.asGridCoord(10,4)]:!0,[G.asGridCoord(11,4)]:!0,[G.asGridCoord(17,4)]:!0,[G.asGridCoord(18,4)]:!0,[G.asGridCoord(19,4)]:!0,[G.asGridCoord(20,4)]:!0,[G.asGridCoord(21,4)]:!0,[G.asGridCoord(22,4)]:!0,[G.asGridCoord(23,4)]:!0,[G.asGridCoord(24,4)]:!0,[G.asGridCoord(25,4)]:!0,[G.asGridCoord(26,4)]:!0,[G.asGridCoord(27,4)]:!0,[G.asGridCoord(28,4)]:!0,[G.asGridCoord(29,4)]:!0,[G.asGridCoord(30,4)]:!0,[G.asGridCoord(31,4)]:!0,[G.asGridCoord(32,0)]:!0,[G.asGridCoord(32,1)]:!0,[G.asGridCoord(32,2)]:!0,[G.asGridCoord(32,3)]:!0,[G.asGridCoord(32,4)]:!0,[G.asGridCoord(32,5)]:!0,[G.asGridCoord(32,6)]:!0,[G.asGridCoord(32,7)]:!0,[G.asGridCoord(32,8)]:!0,[G.asGridCoord(32,9)]:!0,[G.asGridCoord(32,15)]:!0,[G.asGridCoord(32,16)]:!0,[G.asGridCoord(32,17)]:!0,[G.asGridCoord(-1,0)]:!0,[G.asGridCoord(-1,1)]:!0,[G.asGridCoord(-1,2)]:!0,[G.asGridCoord(-1,3)]:!0,[G.asGridCoord(-1,4)]:!0,[G.asGridCoord(-1,5)]:!0,[G.asGridCoord(-1,6)]:!0,[G.asGridCoord(-1,7)]:!0,[G.asGridCoord(-1,8)]:!0,[G.asGridCoord(-1,9)]:!0,[G.asGridCoord(-1,10)]:!0,[G.asGridCoord(-1,11)]:!0,[G.asGridCoord(-1,12)]:!0,[G.asGridCoord(-1,13)]:!0,[G.asGridCoord(-1,14)]:!0,[G.asGridCoord(-1,15)]:!0,[G.asGridCoord(-1,16)]:!0,[G.asGridCoord(-1,17)]:!0,[G.asGridCoord(0,17)]:!0,[G.asGridCoord(1,17)]:!0,[G.asGridCoord(2,17)]:!0,[G.asGridCoord(3,17)]:!0,[G.asGridCoord(4,17)]:!0,[G.asGridCoord(5,17)]:!0,[G.asGridCoord(6,17)]:!0,[G.asGridCoord(7,17)]:!0,[G.asGridCoord(8,17)]:!0,[G.asGridCoord(9,17)]:!0,[G.asGridCoord(10,17)]:!0,[G.asGridCoord(11,17)]:!0,[G.asGridCoord(12,17)]:!0,[G.asGridCoord(13,17)]:!0,[G.asGridCoord(14,17)]:!0,[G.asGridCoord(15,17)]:!0,[G.asGridCoord(16,17)]:!0,[G.asGridCoord(17,17)]:!0,[G.asGridCoord(18,17)]:!0,[G.asGridCoord(19,17)]:!0,[G.asGridCoord(20,17)]:!0,[G.asGridCoord(21,17)]:!0,[G.asGridCoord(22,17)]:!0,[G.asGridCoord(23,17)]:!0,[G.asGridCoord(24,17)]:!0,[G.asGridCoord(25,17)]:!0,[G.asGridCoord(26,17)]:!0,[G.asGridCoord(27,17)]:!0,[G.asGridCoord(28,17)]:!0,[G.asGridCoord(29,17)]:!0,[G.asGridCoord(30,17)]:!0,[G.asGridCoord(31,17)]:!0,[G.asGridCoord(0,8)]:!0,[G.asGridCoord(1,8)]:!0,[G.asGridCoord(2,8)]:!0,[G.asGridCoord(3,8)]:!0,[G.asGridCoord(4,8)]:!0,[G.asGridCoord(5,8)]:!0,[G.asGridCoord(6,8)]:!0,[G.asGridCoord(7,8)]:!0,[G.asGridCoord(8,8)]:!0,[G.asGridCoord(10,0)]:!0,[G.asGridCoord(10,1)]:!0,[G.asGridCoord(10,2)]:!0,[G.asGridCoord(10,3)]:!0,[G.asGridCoord(10,4)]:!0,[G.asGridCoord(10,5)]:!0,[G.asGridCoord(10,6)]:!0,[G.asGridCoord(10,7)]:!0,[G.asGridCoord(10,8)]:!0,[G.asGridCoord(20,8)]:!0,[G.asGridCoord(21,8)]:!0,[G.asGridCoord(22,8)]:!0,[G.asGridCoord(23,8)]:!0,[G.asGridCoord(24,8)]:!0,[G.asGridCoord(25,8)]:!0,[G.asGridCoord(26,8)]:!0,[G.asGridCoord(27,8)]:!0,[G.asGridCoord(28,8)]:!0,[G.asGridCoord(29,8)]:!0,[G.asGridCoord(29,0)]:!0,[G.asGridCoord(29,1)]:!0,[G.asGridCoord(29,2)]:!0,[G.asGridCoord(29,3)]:!0,[G.asGridCoord(29,4)]:!0,[G.asGridCoord(29,5)]:!0,[G.asGridCoord(29,6)]:!0,[G.asGridCoord(29,7)]:!0,[G.asGridCoord(18,0)]:!0,[G.asGridCoord(18,1)]:!0,[G.asGridCoord(18,2)]:!0,[G.asGridCoord(18,3)]:!0,[G.asGridCoord(18,4)]:!0,[G.asGridCoord(18,5)]:!0,[G.asGridCoord(18,6)]:!0,[G.asGridCoord(18,7)]:!0,[G.asGridCoord(19,6)]:!0,[G.asGridCoord(19,7)]:!0,[G.asGridCoord(19,8)]:!0},cutsceneSpaces:{[G.asGridCoord(12,3)]:[{events:[{who:"hero",type:"walk",direction:"up"},{type:"changeMap",map:"Outside01",heroConfig:{x:G.withGrid(21),y:G.withGrid(13),direction:"up"}}]}],[G.asGridCoord(13,3)]:[{events:[{who:"hero",type:"walk",direction:"up"},{type:"changeMap",map:"Outside01",heroConfig:{x:G.withGrid(21),y:G.withGrid(13),direction:"up"}}]}],[G.asGridCoord(14,3)]:[{events:[{who:"hero",type:"walk",direction:"up"},{type:"changeMap",map:"Outside01",heroConfig:{x:G.withGrid(21),y:G.withGrid(13),direction:"up"}}]}],[G.asGridCoord(15,3)]:[{events:[{who:"hero",type:"walk",direction:"up"},{type:"changeMap",map:"Outside01",heroConfig:{x:G.withGrid(21),y:G.withGrid(13),direction:"up"}}]}],[G.asGridCoord(24,9)]:[{events:[{type:"changeMap",map:"ToadstoolInside",heroConfig:{x:G.withGrid(10),y:G.withGrid(13),direction:"up"}}]}],[G.asGridCoord(32,10)]:[{events:[{type:"changeMap",map:"Outside12",heroConfig:{x:G.withGrid(1),y:G.withGrid(9),direction:"down"}}]}],[G.asGridCoord(32,11)]:[{events:[{type:"changeMap",map:"Outside12",heroConfig:{x:G.withGrid(1),y:G.withGrid(9),direction:"right"}}]}],[G.asGridCoord(32,12)]:[{events:[{type:"changeMap",map:"Outside12",heroConfig:{x:G.withGrid(1),y:G.withGrid(9),direction:"right"}}]}],[G.asGridCoord(32,13)]:[{events:[{type:"changeMap",map:"Outside12",heroConfig:{x:G.withGrid(1),y:G.withGrid(9),direction:"right"}}]}],[G.asGridCoord(32,14)]:[{events:[{type:"changeMap",map:"Outside12",heroConfig:{x:G.withGrid(1),y:G.withGrid(9),direction:"right"}}]}]}},TownSquare:{id:"TownSquare",lowerSrc:"./images/maps/TownSquareLower2.png",upperSrc:"./images/maps/TownSquareUpper2.png",withCameraPerson:!0,camera:{yDown:G.withGrid(-3)},configObjects:{hero:{type:"Person",isPlayerControlled:!0,x:G.withGrid(8),y:G.withGrid(8)},oysterGuy:{type:"Person",height:50,width:50,src:"./images/characters/people/OysterGuy.png",x:G.withGrid(11),y:G.withGrid(4)},Fountain:{type:"StaticGameObject",height:60,width:60,src:"./images/objects/Fountain.png",x:G.withGrid(15),y:G.withGrid(7),offsetX:11,offsetY:10,animations:{idle:[[0,0],[1,0],[2,0],[3,0]],move:[[0,0]],near:[[0,0]]},animationFrameLimit:20,radiusInteraction:!1,userInteraction:!1}},walls:{[G.asGridCoord(0,2)]:!0,[G.asGridCoord(1,2)]:!0,[G.asGridCoord(2,2)]:!0,[G.asGridCoord(3,2)]:!0,[G.asGridCoord(4,2)]:!0,[G.asGridCoord(5,2)]:!0,[G.asGridCoord(6,2)]:!0,[G.asGridCoord(7,2)]:!0,[G.asGridCoord(8,2)]:!0,[G.asGridCoord(9,2)]:!0,[G.asGridCoord(10,2)]:!0,[G.asGridCoord(12,2)]:!0,[G.asGridCoord(12,2)]:!0,[G.asGridCoord(13,2)]:!0,[G.asGridCoord(14,2)]:!0,[G.asGridCoord(15,2)]:!0,[G.asGridCoord(16,2)]:!0,[G.asGridCoord(17,2)]:!0,[G.asGridCoord(18,2)]:!0,[G.asGridCoord(19,2)]:!0,[G.asGridCoord(20,2)]:!0,[G.asGridCoord(21,2)]:!0,[G.asGridCoord(22,2)]:!0,[G.asGridCoord(23,2)]:!0,[G.asGridCoord(24,2)]:!0,[G.asGridCoord(25,2)]:!0,[G.asGridCoord(26,2)]:!0,[G.asGridCoord(27,2)]:!0,[G.asGridCoord(28,2)]:!0,[G.asGridCoord(29,2)]:!0,[G.asGridCoord(30,2)]:!0,[G.asGridCoord(31,2)]:!0,[G.asGridCoord(0,16)]:!0,[G.asGridCoord(1,16)]:!0,[G.asGridCoord(2,16)]:!0,[G.asGridCoord(3,16)]:!0,[G.asGridCoord(4,16)]:!0,[G.asGridCoord(5,16)]:!0,[G.asGridCoord(6,16)]:!0,[G.asGridCoord(7,16)]:!0,[G.asGridCoord(8,16)]:!0,[G.asGridCoord(9,16)]:!0,[G.asGridCoord(10,16)]:!0,[G.asGridCoord(11,16)]:!0,[G.asGridCoord(12,16)]:!0,[G.asGridCoord(13,16)]:!0,[G.asGridCoord(14,16)]:!0,[G.asGridCoord(19,16)]:!0,[G.asGridCoord(20,16)]:!0,[G.asGridCoord(21,16)]:!0,[G.asGridCoord(22,16)]:!0,[G.asGridCoord(23,16)]:!0,[G.asGridCoord(24,16)]:!0,[G.asGridCoord(25,16)]:!0,[G.asGridCoord(26,16)]:!0,[G.asGridCoord(27,16)]:!0,[G.asGridCoord(28,16)]:!0,[G.asGridCoord(29,16)]:!0,[G.asGridCoord(30,16)]:!0,[G.asGridCoord(31,16)]:!0,[G.asGridCoord(1,0)]:!0,[G.asGridCoord(1,1)]:!0,[G.asGridCoord(1,2)]:!0,[G.asGridCoord(1,3)]:!0,[G.asGridCoord(1,4)]:!0,[G.asGridCoord(1,5)]:!0,[G.asGridCoord(1,10)]:!0,[G.asGridCoord(1,11)]:!0,[G.asGridCoord(1,12)]:!0,[G.asGridCoord(1,13)]:!0,[G.asGridCoord(1,14)]:!0,[G.asGridCoord(1,15)]:!0,[G.asGridCoord(32,0)]:!0,[G.asGridCoord(32,1)]:!0,[G.asGridCoord(32,2)]:!0,[G.asGridCoord(32,3)]:!0,[G.asGridCoord(32,4)]:!0,[G.asGridCoord(32,5)]:!0,[G.asGridCoord(32,6)]:!0,[G.asGridCoord(32,7)]:!0,[G.asGridCoord(32,8)]:!0,[G.asGridCoord(32,9)]:!0,[G.asGridCoord(32,10)]:!0,[G.asGridCoord(32,11)]:!0,[G.asGridCoord(32,12)]:!0,[G.asGridCoord(32,13)]:!0,[G.asGridCoord(32,14)]:!0,[G.asGridCoord(32,15)]:!0,[G.asGridCoord(15,7)]:!0,[G.asGridCoord(16,7)]:!0,[G.asGridCoord(17,7)]:!0,[G.asGridCoord(18,7)]:!0,[G.asGridCoord(15,8)]:!0,[G.asGridCoord(16,8)]:!0,[G.asGridCoord(17,8)]:!0,[G.asGridCoord(18,8)]:!0,[G.asGridCoord(15,9)]:!0,[G.asGridCoord(16,9)]:!0,[G.asGridCoord(17,9)]:!0,[G.asGridCoord(18,9)]:!0,[G.asGridCoord(15,10)]:!0,[G.asGridCoord(16,10)]:!0,[G.asGridCoord(17,10)]:!0,[G.asGridCoord(18,10)]:!0,[G.asGridCoord(7,4)]:!0,[G.asGridCoord(8,4)]:!0,[G.asGridCoord(9,4)]:!0,[G.asGridCoord(10,4)]:!0,[G.asGridCoord(11,4)]:!0,[G.asGridCoord(12,4)]:!0,[G.asGridCoord(7,5)]:!0,[G.asGridCoord(8,5)]:!0,[G.asGridCoord(9,5)]:!0,[G.asGridCoord(10,5)]:!0,[G.asGridCoord(11,5)]:!0,[G.asGridCoord(12,5)]:!0},cutsceneSpaces:{[G.asGridCoord(1,6)]:[{events:[{who:"hero",type:"walk",direction:"left"},{type:"changeMap",map:"Outside01",heroConfig:{x:G.withGrid(30),y:G.withGrid(13),direction:"left"}}]}],[G.asGridCoord(1,7)]:[{events:[{who:"hero",type:"walk",direction:"left"},{type:"changeMap",map:"Outside01",heroConfig:{x:G.withGrid(30),y:G.withGrid(13),direction:"left"}}]}],[G.asGridCoord(1,8)]:[{events:[{who:"hero",type:"walk",direction:"left"},{type:"changeMap",map:"Outside01",heroConfig:{x:G.withGrid(30),y:G.withGrid(13),direction:"left"}}]}],[G.asGridCoord(1,9)]:[{events:[{who:"hero",type:"walk",direction:"left"},{type:"changeMap",map:"Outside01",heroConfig:{x:G.withGrid(30),y:G.withGrid(13),direction:"left"}}]}],[G.asGridCoord(15,16)]:[{events:[{type:"changeMap",map:"Outside12",heroConfig:{x:G.withGrid(16),y:G.withGrid(2),direction:"down"}}]}],[G.asGridCoord(16,16)]:[{events:[{type:"changeMap",map:"Outside12",heroConfig:{x:G.withGrid(16),y:G.withGrid(2),direction:"down"}}]}],[G.asGridCoord(17,16)]:[{events:[{type:"changeMap",map:"Outside12",heroConfig:{x:G.withGrid(16),y:G.withGrid(2),direction:"down"}}]}],[G.asGridCoord(18,16)]:[{events:[{type:"changeMap",map:"Outside12",heroConfig:{x:G.withGrid(16),y:G.withGrid(2),direction:"down"}}]}]}},ToadstoolInside:{id:"ToadstoolInside",lowerSrc:"./images/maps/ToadstoolInsideLower.png",upperSrc:"./images/maps/ToadstoolInsideUpper.png",withCameraPerson:!0,configObjects:{hero:{type:"Person",isPlayerControlled:!0,x:G.withGrid(1),y:G.withGrid(2)},Chantrella:{type:"Person",x:G.withGrid(-100),y:G.withGrid(-100),src:"./images/characters/people/Chantrella.png",talking:[]},Morel:{type:"Person",x:G.withGrid(18),y:G.withGrid(12),required:["INTRO"],src:"./images/characters/people/Morel.png",talking:[{events:[{type:"textMessage",from:"Morel",text:"Hamanita!!"},{type:"textMessage",from:"Morel",text:"You just missed it!!!"},{type:"textMessage",from:"Morel",text:"You'll never guess who was in here..."},{type:"emote",emotion:"neutral",who:"hero",time:2e3},{type:"textMessage",from:"Morel",text:"..."},{type:"textMessage",from:"Morel",text:"..."},{type:"textMessage",from:"Morel",text:"...Ok fine I'll just tell you"},{type:"textMessage",from:"Morel",text:"Brian Enoki!"},{type:"emote",emotion:"exclamation",who:"hero",time:1e3},{type:"textMessage",from:"Morel",text:"Yeah! Right?"},{type:"textMessage",from:"Morel",text:"We got to chatting and he invited me to a secret night rave"},{type:"textMessage",from:"Morel",text:"TONIGHT!"},{type:"emote",emotion:"heart",who:"hero",time:2e3},{type:"textMessage",from:"Morel",text:"We have to go!"},{type:"addStoryFlag",flag:"TALK_TO_MOREL"},{type:"teleport",who:"Chantrella",coordinates:{x:G.withGrid(10),y:G.withGrid(12)}},{type:"walk",who:"Chantrella",direction:"right",time:1e3},{type:"emote",emotion:"angry",who:"Chantrella",time:5e3},{type:"walk",who:"Chantrella",direction:"right",time:1e3},{type:"walk",who:"Chantrella",direction:"right",time:1e3},{type:"walk",who:"Chantrella",direction:"right",time:1e3},{type:"walk",who:"Chantrella",direction:"right",time:1e3},{type:"textMessage",from:"Chantrella",text:"Uhhhh... Hello?"},{type:"textMessage",from:"Chantrella",text:"What are you guys doing here?"},{type:"emote",emotion:"exclamation",who:"hero",time:2e3},{type:"emote",emotion:"exclamation",who:"Morel",time:2e3},{type:"stand",direction:"left",who:"hero",time:800},{type:"stand",direction:"left",who:"Morel",time:1e3},{type:"textMessage",from:"Morel",text:"Oh! Hi Chantrella...."},{type:"textMessage",from:"Morel",text:"Uhh.... Hamanita and I just ran into each other here"},{type:"emote",emotion:"dots",who:"hero",time:1e3},{type:"stand",direction:"left",who:"hero",time:700},{type:"emote",emotion:"angry",who:"Chantrella",time:2e3},{type:"textMessage",from:"Chantrella",text:"Are you lying to me???"},{type:"emote",emotion:"sweat",who:"Morel",time:1e3},{type:"stand",direction:"left",who:"Morel",time:1200},{type:"textMessage",from:"Chantrella",text:"Ugh! I can't deal with this"},{type:"walk",who:"Chantrella",direction:"left",time:1e3},{type:"walk",who:"Chantrella",direction:"left",time:1e3},{type:"walk",who:"Chantrella",direction:"left",time:1e3},{type:"walk",who:"Chantrella",direction:"left",time:1e3},{type:"walk",who:"Chantrella",direction:"left",time:1e3},{type:"walk",who:"Chantrella",direction:"down",time:1e3},{type:"walk",who:"Chantrella",direction:"down",time:1e3},{type:"walk",who:"Chantrella",direction:"down",time:1e3},{type:"walk",who:"Chantrella",direction:"down",time:1e3},{type:"teleport",who:"Chantrella",coordinates:{x:G.withGrid(-1e3),y:G.withGrid(-1e3)}},{type:"stand",direction:"right",who:"hero",time:200},{type:"textMessage",from:"Morel",text:"Yeesh... I gotta deal with this"},{type:"textMessage",from:"Morel",text:"Sorry dude I'll text you the deets later"},{type:"walk",who:"Morel",direction:"left",time:1e3},{type:"walk",who:"Morel",direction:"left",time:1e3},{type:"walk",who:"Morel",direction:"left",time:1e3},{type:"walk",who:"Morel",direction:"left",time:1e3},{type:"walk",who:"Morel",direction:"left",time:1e3},{type:"walk",who:"Morel",direction:"left",time:1e3},{type:"walk",who:"Morel",direction:"left",time:1e3},{type:"walk",who:"Morel",direction:"left",time:1e3},{type:"walk",who:"Morel",direction:"down",time:1e3},{type:"walk",who:"Morel",direction:"down",time:1e3},{type:"walk",who:"Morel",direction:"down",time:1e3},{type:"walk",who:"Morel",direction:"down",time:1e3},{type:"teleport",who:"Morel",coordinates:{x:G.withGrid(-1e3),y:G.withGrid(-1e3)}},{type:"removeStoryFlag",flag:"INTRO"}]}]}},gameObjects:{},walls:{[G.asGridCoord(0,3)]:!0,[G.asGridCoord(1,3)]:!0,[G.asGridCoord(2,3)]:!0,[G.asGridCoord(3,3)]:!0,[G.asGridCoord(4,3)]:!0,[G.asGridCoord(5,3)]:!0,[G.asGridCoord(6,3)]:!0,[G.asGridCoord(7,3)]:!0,[G.asGridCoord(8,3)]:!0,[G.asGridCoord(9,3)]:!0,[G.asGridCoord(10,3)]:!0,[G.asGridCoord(11,3)]:!0,[G.asGridCoord(12,3)]:!0,[G.asGridCoord(13,3)]:!0,[G.asGridCoord(14,3)]:!0,[G.asGridCoord(15,3)]:!0,[G.asGridCoord(16,3)]:!0,[G.asGridCoord(17,3)]:!0,[G.asGridCoord(18,3)]:!0,[G.asGridCoord(19,3)]:!0,[G.asGridCoord(20,3)]:!0,[G.asGridCoord(-1,0)]:!0,[G.asGridCoord(-1,1)]:!0,[G.asGridCoord(-1,2)]:!0,[G.asGridCoord(-1,4)]:!0,[G.asGridCoord(-1,5)]:!0,[G.asGridCoord(-1,6)]:!0,[G.asGridCoord(-1,7)]:!0,[G.asGridCoord(-1,8)]:!0,[G.asGridCoord(-1,9)]:!0,[G.asGridCoord(-1,10)]:!0,[G.asGridCoord(-1,11)]:!0,[G.asGridCoord(-1,12)]:!0,[G.asGridCoord(-1,13)]:!0,[G.asGridCoord(-1,14)]:!0,[G.asGridCoord(20,0)]:!0,[G.asGridCoord(20,1)]:!0,[G.asGridCoord(20,2)]:!0,[G.asGridCoord(20,4)]:!0,[G.asGridCoord(20,5)]:!0,[G.asGridCoord(20,6)]:!0,[G.asGridCoord(20,7)]:!0,[G.asGridCoord(20,8)]:!0,[G.asGridCoord(20,9)]:!0,[G.asGridCoord(20,10)]:!0,[G.asGridCoord(20,11)]:!0,[G.asGridCoord(20,12)]:!0,[G.asGridCoord(20,13)]:!0,[G.asGridCoord(20,14)]:!0,[G.asGridCoord(0,15)]:!0,[G.asGridCoord(1,15)]:!0,[G.asGridCoord(2,15)]:!0,[G.asGridCoord(3,15)]:!0,[G.asGridCoord(4,15)]:!0,[G.asGridCoord(5,15)]:!0,[G.asGridCoord(6,15)]:!0,[G.asGridCoord(7,15)]:!0,[G.asGridCoord(8,15)]:!0,[G.asGridCoord(9,15)]:!0,[G.asGridCoord(11,15)]:!0,[G.asGridCoord(12,15)]:!0,[G.asGridCoord(13,15)]:!0,[G.asGridCoord(14,15)]:!0,[G.asGridCoord(15,15)]:!0,[G.asGridCoord(16,15)]:!0,[G.asGridCoord(17,15)]:!0,[G.asGridCoord(18,15)]:!0,[G.asGridCoord(19,15)]:!0,[G.asGridCoord(20,15)]:!0,[G.asGridCoord(15,4)]:!0,[G.asGridCoord(15,5)]:!0,[G.asGridCoord(15,6)]:!0,[G.asGridCoord(16,6)]:!0,[G.asGridCoord(17,6)]:!0,[G.asGridCoord(18,6)]:!0,[G.asGridCoord(19,6)]:!0,[G.asGridCoord(2,6)]:!0,[G.asGridCoord(3,6)]:!0,[G.asGridCoord(4,6)]:!0,[G.asGridCoord(5,6)]:!0,[G.asGridCoord(6,6)]:!0,[G.asGridCoord(2,12)]:!0,[G.asGridCoord(3,12)]:!0,[G.asGridCoord(4,12)]:!0,[G.asGridCoord(5,12)]:!0,[G.asGridCoord(6,12)]:!0,[G.asGridCoord(6,6)]:!0,[G.asGridCoord(6,7)]:!0,[G.asGridCoord(6,8)]:!0,[G.asGridCoord(6,9)]:!0,[G.asGridCoord(6,10)]:!0,[G.asGridCoord(6,11)]:!0,[G.asGridCoord(6,12)]:!0,[G.asGridCoord(2,6)]:!0,[G.asGridCoord(2,7)]:!0,[G.asGridCoord(2,8)]:!0,[G.asGridCoord(2,9)]:!0,[G.asGridCoord(2,10)]:!0,[G.asGridCoord(2,11)]:!0,[G.asGridCoord(2,12)]:!0,[G.asGridCoord(9,7)]:!0,[G.asGridCoord(9,8)]:!0,[G.asGridCoord(9,9)]:!0,[G.asGridCoord(9,10)]:!0,[G.asGridCoord(9,11)]:!0,[G.asGridCoord(13,7)]:!0,[G.asGridCoord(13,8)]:!0,[G.asGridCoord(13,9)]:!0,[G.asGridCoord(13,10)]:!0,[G.asGridCoord(13,11)]:!0,[G.asGridCoord(9,7)]:!0,[G.asGridCoord(10,7)]:!0,[G.asGridCoord(11,7)]:!0,[G.asGridCoord(12,7)]:!0,[G.asGridCoord(13,7)]:!0,[G.asGridCoord(9,11)]:!0,[G.asGridCoord(10,11)]:!0,[G.asGridCoord(11,11)]:!0,[G.asGridCoord(12,11)]:!0,[G.asGridCoord(13,11)]:!0},cutsceneSpaces:{[G.asGridCoord(10,15)]:[{events:[{who:"hero",type:"walk",direction:"down"},{type:"changeMap",map:"Toadstool",heroConfig:{x:G.withGrid(24),y:G.withGrid(11),direction:"down",nearDoor:"ToadstoolDoor"}}]}]}},Outside12:{id:"Outside12",lowerSrc:"./images/maps/Outside12Lower.png",upperSrc:"./images/maps/Outside12Upper.png",withCameraPerson:!0,configObjects:{hero:{type:"Person",isPlayerControlled:!0,x:G.withGrid(2),y:G.withGrid(8)}},walls:{[G.asGridCoord(0,0)]:!0,[G.asGridCoord(1,0)]:!0,[G.asGridCoord(2,0)]:!0,[G.asGridCoord(3,0)]:!0,[G.asGridCoord(4,0)]:!0,[G.asGridCoord(5,0)]:!0,[G.asGridCoord(6,0)]:!0,[G.asGridCoord(7,0)]:!0,[G.asGridCoord(8,0)]:!0,[G.asGridCoord(9,0)]:!0,[G.asGridCoord(10,0)]:!0,[G.asGridCoord(11,0)]:!0,[G.asGridCoord(12,0)]:!0,[G.asGridCoord(13,0)]:!0,[G.asGridCoord(19,0)]:!0,[G.asGridCoord(20,0)]:!0,[G.asGridCoord(21,0)]:!0,[G.asGridCoord(22,0)]:!0,[G.asGridCoord(23,0)]:!0,[G.asGridCoord(24,0)]:!0,[G.asGridCoord(25,0)]:!0,[G.asGridCoord(26,0)]:!0,[G.asGridCoord(27,0)]:!0,[G.asGridCoord(28,0)]:!0,[G.asGridCoord(29,0)]:!0,[G.asGridCoord(30,0)]:!0,[G.asGridCoord(31,0)]:!0,[G.asGridCoord(32,0)]:!0,[G.asGridCoord(32,1)]:!0,[G.asGridCoord(32,2)]:!0,[G.asGridCoord(32,3)]:!0,[G.asGridCoord(32,4)]:!0,[G.asGridCoord(32,5)]:!0,[G.asGridCoord(32,6)]:!0,[G.asGridCoord(32,7)]:!0,[G.asGridCoord(32,8)]:!0,[G.asGridCoord(32,9)]:!0,[G.asGridCoord(32,10)]:!0,[G.asGridCoord(32,11)]:!0,[G.asGridCoord(32,12)]:!0,[G.asGridCoord(32,13)]:!0,[G.asGridCoord(32,14)]:!0,[G.asGridCoord(32,15)]:!0,[G.asGridCoord(32,16)]:!0,[G.asGridCoord(32,17)]:!0,[G.asGridCoord(0,0)]:!0,[G.asGridCoord(0,1)]:!0,[G.asGridCoord(0,2)]:!0,[G.asGridCoord(0,3)]:!0,[G.asGridCoord(0,4)]:!0,[G.asGridCoord(0,5)]:!0,[G.asGridCoord(0,6)]:!0,[G.asGridCoord(0,7)]:!0,[G.asGridCoord(0,8)]:!0,[G.asGridCoord(0,9)]:!0,[G.asGridCoord(0,10)]:!0,[G.asGridCoord(0,11)]:!0,[G.asGridCoord(0,12)]:!0,[G.asGridCoord(0,13)]:!0,[G.asGridCoord(0,14)]:!0,[G.asGridCoord(0,15)]:!0,[G.asGridCoord(0,16)]:!0,[G.asGridCoord(0,17)]:!0,[G.asGridCoord(0,17)]:!0,[G.asGridCoord(1,17)]:!0,[G.asGridCoord(2,17)]:!0,[G.asGridCoord(3,17)]:!0,[G.asGridCoord(4,17)]:!0,[G.asGridCoord(5,17)]:!0,[G.asGridCoord(6,17)]:!0,[G.asGridCoord(7,17)]:!0,[G.asGridCoord(8,17)]:!0,[G.asGridCoord(9,17)]:!0,[G.asGridCoord(10,17)]:!0,[G.asGridCoord(11,17)]:!0,[G.asGridCoord(12,17)]:!0,[G.asGridCoord(13,17)]:!0,[G.asGridCoord(14,17)]:!0,[G.asGridCoord(15,17)]:!0,[G.asGridCoord(16,17)]:!0,[G.asGridCoord(17,17)]:!0,[G.asGridCoord(18,17)]:!0,[G.asGridCoord(19,17)]:!0,[G.asGridCoord(20,17)]:!0,[G.asGridCoord(21,17)]:!0,[G.asGridCoord(22,17)]:!0,[G.asGridCoord(23,17)]:!0,[G.asGridCoord(24,17)]:!0,[G.asGridCoord(25,17)]:!0,[G.asGridCoord(26,17)]:!0,[G.asGridCoord(27,17)]:!0,[G.asGridCoord(28,17)]:!0,[G.asGridCoord(29,17)]:!0,[G.asGridCoord(30,17)]:!0,[G.asGridCoord(31,17)]:!0},cutsceneSpaces:{[G.asGridCoord(14,0)]:[{events:[{type:"changeMap",map:"TownSquare",heroConfig:{x:G.withGrid(15),y:G.withGrid(14),direction:"up"}}]}],[G.asGridCoord(15,0)]:[{events:[{type:"changeMap",map:"TownSquare",heroConfig:{x:G.withGrid(15),y:G.withGrid(14),direction:"up"}}]}],[G.asGridCoord(16,0)]:[{events:[{type:"changeMap",map:"TownSquare",heroConfig:{x:G.withGrid(15),y:G.withGrid(14),direction:"up"}}]}],[G.asGridCoord(17,0)]:[{events:[{type:"changeMap",map:"TownSquare",heroConfig:{x:G.withGrid(15),y:G.withGrid(14),direction:"up"}}]}],[G.asGridCoord(1,8)]:[{events:[{type:"changeMap",map:"Toadstool",heroConfig:{x:G.withGrid(30),y:G.withGrid(12),direction:"up"}}]}],[G.asGridCoord(1,9)]:[{events:[{type:"changeMap",map:"Toadstool",heroConfig:{x:G.withGrid(30),y:G.withGrid(12),direction:"up"}}]}],[G.asGridCoord(1,10)]:[{events:[{type:"changeMap",map:"Toadstool",heroConfig:{x:G.withGrid(30),y:G.withGrid(12),direction:"up"}}]}],[G.asGridCoord(1,11)]:[{events:[{type:"changeMap",map:"Toadstool",heroConfig:{x:G.withGrid(30),y:G.withGrid(12),direction:"up"}}]}]}},CandyCap:{id:"CandyCap",withCameraPerson:!0,camera:{xRight:G.withGrid(5),xLeft:G.withGrid(5),yUp:G.withGrid(3),yDown:G.withGrid(3)},lowerSrc:"./images/maps/CandyCapLower.png",upperSrc:"./images/maps/CandyCapUpper.png",configObjects:{hero:{type:"Person",isPlayerControlled:!0,x:G.withGrid(5),y:G.withGrid(7)},Kandi:{type:"Person",x:G.withGrid(8),y:G.withGrid(3),offsetHeight:16,offsetWidth:12,height:48,width:48,src:"./images/characters/people/Kandi.png",talking:[{required:["TALKED_TO_KANDI"],events:[{type:"textMessage",from:"Kandi",text:"It's so sad isn't it?"},{type:"textMessage",from:"Kandi",text:"At least now I can focus on my music"}]}]}},gameObjects:{},initialEvents:{events:[{type:"textMessage",from:"Kandi",text:"Oh Hamanita you're here"},{type:"walk",who:"Kandi",direction:"right",time:1e3},{type:"walk",who:"Kandi",direction:"right",time:1e3},{type:"walk",who:"Kandi",direction:"right",time:1e3},{type:"walk",who:"Kandi",direction:"down",time:1e3},{type:"walk",who:"Kandi",direction:"down",time:1e3},{type:"walk",who:"Kandi",direction:"down",time:1e3},{type:"walk",who:"Kandi",direction:"down",time:1e3},{type:"stand",who:"hero",direction:"right"},{type:"walk",who:"Kandi",direction:"left",time:1e3},{type:"walk",who:"Kandi",direction:"left",time:1e3},{type:"walk",who:"Kandi",direction:"left",time:1e3},{type:"walk",who:"Kandi",direction:"left",time:1e3},{type:"textMessage",from:"Kandi",text:"Here's your check from last week"},{type:"textMessage",from:"Kandi",text:"Now about that news..."},{type:"textMessage",from:"Kandi",text:"That gosh dang health inspector dropped by again"},{type:"textMessage",from:"Kandi",text:"Said we can't stay open"},{type:"textMessage",from:"Kandi",text:"We have to close for the day and deep clean everything"},{type:"emote",emotion:"sweat",who:"hero",time:3e3},{type:"textMessage",from:"Kandi",text:"You're not doing anything tonight are you?"},{type:"emote",emotion:"dots",who:"hero",time:2e3},{type:"emote",emotion:"dots",who:"hero",time:2e3},{type:"textMessage",from:"Kandi",text:"Oh, you do have plans?"},{type:"textMessage",from:"Kandi",text:"That's surprising I didn't know you had any friends"},{type:"textMessage",from:"Kandi",text:"They've never been around here that's for sure"},{type:"textMessage",from:"Kandi",text:"They don't come here because it's gross? That's not even true!"},{type:"textMessage",from:"Kandi",text:"..."},{type:"textMessage",from:"Kandi",text:"Ok well... if no one's going to clean up around here I guess I'll just have to shut down shop"},{type:"textMessage",from:"Kandi",text:"No ice cream for Mushroom Town today!"},{type:"walk",who:"Kandi",direction:"down",time:1e3},{type:"walk",who:"Kandi",direction:"left",time:1e3},{type:"walk",who:"Kandi",direction:"down",time:1e3},{type:"walk",who:"Kandi",direction:"down",time:1e3},{type:"teleport",who:"Kandi",coordinates:{x:G.withGrid(-1e3),y:G.withGrid(-1e3)}},{type:"addStoryFlag",flag:"TALKED_TO_KANDI"},{type:"removeStoryFlag",flag:"NO_CHECK"}]},walls:{[G.asGridCoord(0,2)]:!0,[G.asGridCoord(1,2)]:!0,[G.asGridCoord(2,2)]:!0,[G.asGridCoord(3,2)]:!0,[G.asGridCoord(4,2)]:!0,[G.asGridCoord(5,2)]:!0,[G.asGridCoord(6,2)]:!0,[G.asGridCoord(7,2)]:!0,[G.asGridCoord(8,2)]:!0,[G.asGridCoord(9,2)]:!0,[G.asGridCoord(10,2)]:!0,[G.asGridCoord(11,2)]:!0,[G.asGridCoord(-1,0)]:!0,[G.asGridCoord(-1,1)]:!0,[G.asGridCoord(-1,2)]:!0,[G.asGridCoord(-1,3)]:!0,[G.asGridCoord(-1,4)]:!0,[G.asGridCoord(-1,5)]:!0,[G.asGridCoord(-1,6)]:!0,[G.asGridCoord(-1,7)]:!0,[G.asGridCoord(-1,8)]:!0,[G.asGridCoord(12,0)]:!0,[G.asGridCoord(12,1)]:!0,[G.asGridCoord(12,2)]:!0,[G.asGridCoord(12,3)]:!0,[G.asGridCoord(12,4)]:!0,[G.asGridCoord(12,5)]:!0,[G.asGridCoord(12,6)]:!0,[G.asGridCoord(12,7)]:!0,[G.asGridCoord(12,8)]:!0,[G.asGridCoord(0,9)]:!0,[G.asGridCoord(1,9)]:!0,[G.asGridCoord(2,9)]:!0,[G.asGridCoord(3,9)]:!0,[G.asGridCoord(4,9)]:!0,[G.asGridCoord(5,9)]:!0,[G.asGridCoord(7,9)]:!0,[G.asGridCoord(8,9)]:!0,[G.asGridCoord(9,9)]:!0,[G.asGridCoord(10,9)]:!0,[G.asGridCoord(11,9)]:!0,[G.asGridCoord(2,4)]:!0,[G.asGridCoord(3,4)]:!0,[G.asGridCoord(4,4)]:!0,[G.asGridCoord(5,4)]:!0,[G.asGridCoord(6,4)]:!0,[G.asGridCoord(7,4)]:!0,[G.asGridCoord(8,4)]:!0,[G.asGridCoord(9,4)]:!0,[G.asGridCoord(10,8)]:!0,[G.asGridCoord(2,8)]:!0,[G.asGridCoord(1,7)]:!0},cutsceneSpaces:{[G.asGridCoord(6,9)]:[{events:[{who:"hero",type:"walk",direction:"down"},{type:"changeMap",map:"Toadstool",heroConfig:{x:G.withGrid(5),y:G.withGrid(10),direction:"down",nearDoor:"CandyCapDoor"}}]}]}}};class f{constructor(){this.heldDirections=[],this.map={ArrowUp:"up",ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right",KeyW:"up",KeyS:"down",KeyA:"left",KeyD:"right"}}get direction(){return this.heldDirections[0]}init(){document.addEventListener("keydown",(o=>{const e=this.map[o.code];e&&-1===this.heldDirections.indexOf(e)&&this.heldDirections.unshift(e)})),document.addEventListener("keyup",(o=>{const e=this.map[o.code],r=this.heldDirections.indexOf(e);r>-1&&this.heldDirections.splice(r,1)}))}}class x{constructor(){this.saveFileKey="MushroomProgress_SaveFile1",this.mapId="Bedroom",this.startingHeroX=0,this.startingHeroY=0,this.startingHeroDirection="down"}save(){window.localStorage.setItem(this.saveFileKey,JSON.stringify({mapId:this.mapId,startingHeroX:this.startingHeroX,startingHeroY:this.startingHeroY,startingHeroDirection:this.startingHeroDirection,playerState:{storyFlags:playerState.storyFlags,inbox:playerState.inbox},clockState:{time:clockState.time}}))}getSaveFile(){const o=window.localStorage.getItem(this.saveFileKey);return o?JSON.parse(o):null}load(){const o=this.getSaveFile();o&&(this.mapId=o.mapId,this.startingHeroX=o.startingHeroX,this.startingHeroY=o.startingHeroY,this.startingHeroDirection=o.startingHeroDirection,Object.keys(o.playerState).forEach((e=>{playerState[e]=o.playerState[e]})),Object.keys(o.clockState).forEach((e=>{clockState[e]=o.clockState[e]})))}}class M{constructor(o){this.element=o.element,this.canvas=this.element.querySelector(".game-canvas"),this.ctx=this.canvas.getContext("2d"),this.map=null}startGameLoop(){let o=0;const e=r=>{const i=r-o;o=r,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.map.updateObjects({map:this.map,arrow:this.directionHandler.direction,deltaTime:i}),this.map.draw(this.ctx),requestAnimationFrame((o=>{e(o)}))};e(o)}bindActionHandlers(){new n("Enter",(()=>{this.map.checkForActionCutscene()}))}bindHeroPositionCheck(){document.addEventListener("PersonWalkingComplete",(o=>{"hero"===o.detail.whoId&&(this.map.checkForFootstepCutscene(),this.map.checkForStaticObjectAnimation())}))}bindClockCheck(){document.addEventListener("TimePassed",(o=>{this.map.checkForTimedCutscene()}))}startMap(o,e=null){if(this.map=new v(o),this.map.overworld=this,this.map.mountObjects(),e&&(this.map.gameObjects.hero.x=e.x,this.map.gameObjects.hero.y=e.y,this.map.gameObjects.hero.direction=e.direction,e.nearDoor)){const o=this.map.gameObjects[e.nearDoor];o?.propOpen()}this.map.playInitialScenes(),this.progress.mapId=o.id,this.progress.startingHeroX=this.map.gameObjects.hero.x,this.progress.startingHeroY=this.map.gameObjects.hero.y,this.progress.startingHeroDirection=this.map.gameObjects.hero.direction}async init(){const o=document.querySelector(".game-container");this.progress=new x,this.settings=new h,this.settings.init(o);let e=null;this.progress.getSaveFile()&&(this.progress.load(),e={x:this.progress.startingHeroX,y:this.progress.startingHeroY,direction:this.progress.startingHeroDirection}),this.pda=new s(this.progress),this.pda.init(o),this.emotionHandler=new C,this.startMap(window.OverworldMaps[this.progress.mapId],e),this.bindActionHandlers(),this.bindHeroPositionCheck(),this.bindClockCheck(),this.directionHandler=new f,this.directionHandler.init(),this.startGameLoop()}}window.addEventListener("load",(function(){new M({element:document.querySelector(".game-container")}).init()}))})();